<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.3.450">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>Project title</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>


</head>

<body class="nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg navbar-dark ">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container">
    <a class="navbar-brand" href="./index.html">
    <span class="navbar-title">Analyzing Impact of COVID-19 on NYC School Populations</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="dropdown-header">
 <span class="menu-text">Home</span></li>
  <li class="nav-item">
    <a class="nav-link" href="./index.html" rel="" target="">
 <span class="menu-text">TEAM NAME</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="./proposal.html" rel="" target="">
 <span class="menu-text">Proposal</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link active" href="./explore.html" rel="" target="" aria-current="page">
 <span class="menu-text">Exploratory data analysis</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="./presentation.html" rel="" target="">
 <span class="menu-text">Presentation</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="./report.html" rel="" target="">
 <span class="menu-text">Report</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="./appendices.html" rel="" target="">
 <span class="menu-text">Appendices</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="./about.html" rel="" target="">
 <span class="menu-text">About</span></a>
  </li>  
</ul>
            <div class="quarto-navbar-tools ms-auto">
</div>
          </div> <!-- /navcollapse -->
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#objectives" id="toc-objectives" class="nav-link active" data-scroll-target="#objectives">Objective(s)</a>
  <ul class="collapse">
  <li><a href="#we-posed-questions-such-as" id="toc-we-posed-questions-such-as" class="nav-link" data-scroll-target="#we-posed-questions-such-as">We posed questions such as:</a></li>
  </ul></li>
  <li><a href="#data-import-and-cleaning" id="toc-data-import-and-cleaning" class="nav-link" data-scroll-target="#data-import-and-cleaning">Data import and cleaning</a>
  <ul class="collapse">
  <li><a href="#sources-of-data" id="toc-sources-of-data" class="nav-link" data-scroll-target="#sources-of-data">Sources of data</a></li>
  <li><a href="#initial-views-of-the-data" id="toc-initial-views-of-the-data" class="nav-link" data-scroll-target="#initial-views-of-the-data">Initial views of the data</a></li>
  <li><a href="#data-cleaning" id="toc-data-cleaning" class="nav-link" data-scroll-target="#data-cleaning">Data Cleaning</a></li>
  </ul></li>
  <li><a href="#data-description" id="toc-data-description" class="nav-link" data-scroll-target="#data-description">Data description</a>
  <ul class="collapse">
  <li><a href="#first-some-notes" id="toc-first-some-notes" class="nav-link" data-scroll-target="#first-some-notes">First, some notes:</a></li>
  <li><a href="#what-are-the-observations-rows-and-the-attributes-columns" id="toc-what-are-the-observations-rows-and-the-attributes-columns" class="nav-link" data-scroll-target="#what-are-the-observations-rows-and-the-attributes-columns">What are the observations (rows) and the attributes (columns)?</a></li>
  <li><a href="#why-was-this-dataset-created" id="toc-why-was-this-dataset-created" class="nav-link" data-scroll-target="#why-was-this-dataset-created">Why was this dataset created?</a></li>
  <li><a href="#who-funded-the-creation-of-the-dataset" id="toc-who-funded-the-creation-of-the-dataset" class="nav-link" data-scroll-target="#who-funded-the-creation-of-the-dataset">Who funded the creation of the dataset?</a></li>
  <li><a href="#what-processes-might-have-influenced-what-data-was-observed-and-recorded-and-what-was-not" id="toc-what-processes-might-have-influenced-what-data-was-observed-and-recorded-and-what-was-not" class="nav-link" data-scroll-target="#what-processes-might-have-influenced-what-data-was-observed-and-recorded-and-what-was-not">What processes might have influenced what data was observed and recorded and what was not?</a></li>
  <li><a href="#what-preprocessing-was-done-and-how-did-the-data-come-to-be-in-the-form-that-you-are-using" id="toc-what-preprocessing-was-done-and-how-did-the-data-come-to-be-in-the-form-that-you-are-using" class="nav-link" data-scroll-target="#what-preprocessing-was-done-and-how-did-the-data-come-to-be-in-the-form-that-you-are-using">What preprocessing was done, and how did the data come to be in the form that you are using?</a></li>
  <li><a href="#if-people-are-involved-were-they-aware-of-the-data-collection-and-if-so-what-purpose-did-they-expect-the-data-to-be-used-for" id="toc-if-people-are-involved-were-they-aware-of-the-data-collection-and-if-so-what-purpose-did-they-expect-the-data-to-be-used-for" class="nav-link" data-scroll-target="#if-people-are-involved-were-they-aware-of-the-data-collection-and-if-so-what-purpose-did-they-expect-the-data-to-be-used-for">If people are involved, were they aware of the data collection and if so, what purpose did they expect the data to be used for?</a></li>
  </ul></li>
  <li><a href="#data-limitations" id="toc-data-limitations" class="nav-link" data-scroll-target="#data-limitations">Data limitations</a>
  <ul class="collapse">
  <li><a href="#identify-any-potential-problems-with-your-dataset." id="toc-identify-any-potential-problems-with-your-dataset." class="nav-link" data-scroll-target="#identify-any-potential-problems-with-your-dataset.">Identify any potential problems with your dataset.</a></li>
  </ul></li>
  <li><a href="#exploratory-data-analysis" id="toc-exploratory-data-analysis" class="nav-link" data-scroll-target="#exploratory-data-analysis">Exploratory data analysis</a>
  <ul class="collapse">
  <li><a href="#we-posed-questions-such-as-1" id="toc-we-posed-questions-such-as-1" class="nav-link" data-scroll-target="#we-posed-questions-such-as-1">We posed questions such as:</a></li>
  </ul></li>
  <li><a href="#questions-for-reviewers" id="toc-questions-for-reviewers" class="nav-link" data-scroll-target="#questions-for-reviewers">Questions for reviewers</a></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Project title</h1>
<p class="subtitle lead">Exploration</p>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  

</header>

<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(readr)</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyr)</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggplot2)</span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(dplyr)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>
Attaching package: 'dplyr'</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>The following objects are masked from 'package:stats':

    filter, lag</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>The following objects are masked from 'package:base':

    intersect, setdiff, setequal, union</code></pre>
</div>
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(snakecase)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<section id="objectives" class="level1">
<h1>Objective(s)</h1>
<p>State the question(s) you are answering or the problem(s) you are solving clearly.</p>
<p>The data contains demographic information for NYC schools between the years 2013 (2013-14) and 2021 (2021-22). Our objective for this project is to explore how Covid-19 affects the NYC schools. We will consider how COVID affected education through attributes such as race, disability, economic status, etc. Covid-19 started affecting schools in the US during March 2019.</p>
<section id="we-posed-questions-such-as" class="level2">
<h2 class="anchored" data-anchor-id="we-posed-questions-such-as">We posed questions such as:</h2>
<ul>
<li><p>How did covid-19 affect school enrollment? Including total enrollment, enrollment by grade level (PK-12).</p></li>
<li><p>How did covid-19 effect the enrollment of schools with different levels of funding? Are underserved schools affect more than schools with sufficient fundings.</p></li>
<li><p>Did Covid-19 disproportionately affect school enrollment of minorities student/students of color?</p></li>
<li><p>Did Covid-19 disproportionately affect school enrollment of students with disabilities?</p></li>
<li><p>Did Covid-19 disproportionately affect school enrollment of students in poverty?</p></li>
<li><p>Did Covid-19 disproportionately affect school enrollment of students who have challenges in leaning with the Anglish language?</p></li>
</ul>
<p>Note: DBN (District Borough Number) is the combination of the District Number, the letter code for the borough, and the number of the school</p>
</section>
</section>
<section id="data-import-and-cleaning" class="level1">
<h1>Data import and cleaning</h1>
<p>Have an initial draft of your data cleaning appendix. Document every step that takes your raw data file(s) and turns it into the analysis-ready data set that you would submit with your final project. Include text narrative describing your data collection (downloading, scraping, surveys, etc) and any additional data curation/cleaning (merging data frames, filtering, transformations of variables, etc). Include code for data curation/cleaning, but not collection.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="co"># upload data </span></span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a>nyc_schools_17_to_22 <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="st">"2017-18__-_2021-22_Demographic_Snapshot_20231020.csv"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Rows: 9251 Columns: 44
── Column specification ────────────────────────────────────────────────────────
Delimiter: ","
chr  (6): DBN, School Name, Year, # Poverty, % Poverty, Economic Need Index
dbl (38): Total Enrollment, Grade 3K, Grade PK (Half Day &amp; Full Day), Grade ...

ℹ Use `spec()` to retrieve the full column specification for this data.
ℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.</code></pre>
</div>
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a>nyc_schools_13_to_18 <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="st">"2013_-_2018_Demographic_Snapshot_School_20231024.csv"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Rows: 8972 Columns: 39
── Column specification ────────────────────────────────────────────────────────
Delimiter: ","
chr  (4): DBN, School Name, Year, Economic Need Index
dbl (35): Total Enrollment, Grade PK (Half Day &amp; Full Day), Grade K, Grade 1...

ℹ Use `spec()` to retrieve the full column specification for this data.
ℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.</code></pre>
</div>
</div>
<section id="sources-of-data" class="level2">
<h2 class="anchored" data-anchor-id="sources-of-data">Sources of data</h2>
<p>nyc_schools_17_to_22: source: https://data.cityofnewyork.us/Education/2017-18-2021-22-Demographic-Snapshot/c7ru-d68s data provided by New York City Department of Education</p>
<p>nyc_schools_13_to_18: source: https://data.cityofnewyork.us/Education/2013-2018-Demographic-Snapshot-School/s52a-8aq6 data provided by New York City Department of Education</p>
</section>
<section id="initial-views-of-the-data" class="level2">
<h2 class="anchored" data-anchor-id="initial-views-of-the-data">Initial views of the data</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb10"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a>nyc_schools_17_to_22</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 9,251 × 44
   DBN    `School Name`             Year    `Total Enrollment` `Grade 3K`
   &lt;chr&gt;  &lt;chr&gt;                     &lt;chr&gt;                &lt;dbl&gt;      &lt;dbl&gt;
 1 01M015 P.S. 015 Roberto Clemente 2017-18                190          0
 2 01M015 P.S. 015 Roberto Clemente 2018-19                174          0
 3 01M015 P.S. 015 Roberto Clemente 2019-20                190          0
 4 01M015 P.S. 015 Roberto Clemente 2020-21                193          0
 5 01M015 P.S. 015 Roberto Clemente 2021-22                179          0
 6 01M019 P.S. 019 Asher Levy       2017-18                257          0
 7 01M019 P.S. 019 Asher Levy       2018-19                249          0
 8 01M019 P.S. 019 Asher Levy       2019-20                236          0
 9 01M019 P.S. 019 Asher Levy       2020-21                212          0
10 01M019 P.S. 019 Asher Levy       2021-22                176          9
# ℹ 9,241 more rows
# ℹ 39 more variables: `Grade PK (Half Day &amp; Full Day)` &lt;dbl&gt;, `Grade K` &lt;dbl&gt;,
#   `Grade 1` &lt;dbl&gt;, `Grade 2` &lt;dbl&gt;, `Grade 3` &lt;dbl&gt;, `Grade 4` &lt;dbl&gt;,
#   `Grade 5` &lt;dbl&gt;, `Grade 6` &lt;dbl&gt;, `Grade 7` &lt;dbl&gt;, `Grade 8` &lt;dbl&gt;,
#   `Grade 9` &lt;dbl&gt;, `Grade 10` &lt;dbl&gt;, `Grade 11` &lt;dbl&gt;, `Grade 12` &lt;dbl&gt;,
#   `# Female` &lt;dbl&gt;, `% Female` &lt;dbl&gt;, `# Male` &lt;dbl&gt;, `% Male` &lt;dbl&gt;,
#   `# Asian` &lt;dbl&gt;, `% Asian` &lt;dbl&gt;, `# Black` &lt;dbl&gt;, `% Black` &lt;dbl&gt;, …</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb12"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a><span class="co">#glimpse of data </span></span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-3"><a href="#cb12-3" aria-hidden="true" tabindex="-1"></a><span class="fu">glimpse</span>(nyc_schools_17_to_22)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Rows: 9,251
Columns: 44
$ DBN                              &lt;chr&gt; "01M015", "01M015", "01M015", "01M015…
$ `School Name`                    &lt;chr&gt; "P.S. 015 Roberto Clemente", "P.S. 01…
$ Year                             &lt;chr&gt; "2017-18", "2018-19", "2019-20", "202…
$ `Total Enrollment`               &lt;dbl&gt; 190, 174, 190, 193, 179, 257, 249, 23…
$ `Grade 3K`                       &lt;dbl&gt; 0, 0, 0, 0, 0, 0, 0, 0, 0, 9, 0, 0, 0…
$ `Grade PK (Half Day &amp; Full Day)` &lt;dbl&gt; 17, 13, 14, 17, 15, 13, 10, 16, 13, 7…
$ `Grade K`                        &lt;dbl&gt; 28, 20, 29, 29, 30, 34, 30, 25, 23, 2…
$ `Grade 1`                        &lt;dbl&gt; 32, 33, 28, 29, 26, 38, 39, 27, 25, 2…
$ `Grade 2`                        &lt;dbl&gt; 33, 30, 38, 27, 24, 42, 43, 39, 27, 2…
$ `Grade 3`                        &lt;dbl&gt; 23, 30, 33, 30, 22, 46, 41, 45, 38, 2…
$ `Grade 4`                        &lt;dbl&gt; 31, 20, 29, 32, 33, 42, 44, 42, 44, 3…
$ `Grade 5`                        &lt;dbl&gt; 26, 28, 19, 29, 29, 42, 42, 42, 42, 3…
$ `Grade 6`                        &lt;dbl&gt; 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0…
$ `Grade 7`                        &lt;dbl&gt; 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0…
$ `Grade 8`                        &lt;dbl&gt; 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0…
$ `Grade 9`                        &lt;dbl&gt; 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0…
$ `Grade 10`                       &lt;dbl&gt; 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0…
$ `Grade 11`                       &lt;dbl&gt; 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0…
$ `Grade 12`                       &lt;dbl&gt; 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0…
$ `# Female`                       &lt;dbl&gt; 99, 85, 94, 101, 96, 114, 114, 110, 9…
$ `% Female`                       &lt;dbl&gt; 0.521, 0.489, 0.495, 0.523, 0.536, 0.…
$ `# Male`                         &lt;dbl&gt; 91, 89, 96, 92, 83, 143, 135, 126, 11…
$ `% Male`                         &lt;dbl&gt; 0.479, 0.511, 0.505, 0.477, 0.464, 0.…
$ `# Asian`                        &lt;dbl&gt; 20, 24, 27, 26, 21, 23, 14, 11, 13, 1…
$ `% Asian`                        &lt;dbl&gt; 0.105, 0.138, 0.142, 0.135, 0.117, 0.…
$ `# Black`                        &lt;dbl&gt; 52, 48, 56, 53, 50, 49, 52, 49, 41, 3…
$ `% Black`                        &lt;dbl&gt; 0.274, 0.276, 0.295, 0.275, 0.279, 0.…
$ `# Hispanic`                     &lt;dbl&gt; 110, 95, 96, 102, 93, 166, 156, 148, …
$ `% Hispanic`                     &lt;dbl&gt; 0.579, 0.546, 0.505, 0.528, 0.520, 0.…
$ `# Multi-Racial`                 &lt;dbl&gt; 1, 0, 0, 1, 3, 3, 8, 8, 7, 8, 14, 12,…
$ `% Multi-Racial`                 &lt;dbl&gt; 0.005, 0.000, 0.000, 0.005, 0.017, 0.…
$ `# Native American`              &lt;dbl&gt; 1, 1, 2, 0, 0, 0, 1, 1, 1, 1, 4, 3, 5…
$ `% Native American`              &lt;dbl&gt; 0.005, 0.006, 0.011, 0.000, 0.000, 0.…
$ `# White`                        &lt;dbl&gt; 6, 6, 9, 11, 12, 16, 18, 19, 17, 21, …
$ `% White`                        &lt;dbl&gt; 0.032, 0.034, 0.047, 0.057, 0.067, 0.…
$ `# Missing Race/Ethnicity Data`  &lt;dbl&gt; 0, 0, 0, 0, 0, 0, 0, 0, 3, 3, 1, 1, 1…
$ `% Missing Race/Ethnicity Data`  &lt;dbl&gt; 0.000, 0.000, 0.000, 0.000, 0.000, 0.…
$ `# Students with Disabilities`   &lt;dbl&gt; 49, 39, 46, 44, 38, 90, 102, 94, 87, …
$ `% Students with Disabilities`   &lt;dbl&gt; 0.258, 0.224, 0.242, 0.228, 0.212, 0.…
$ `# English Language Learners`    &lt;dbl&gt; 8, 8, 17, 21, 11, 8, 8, 8, 9, 6, 86, …
$ `% English Language Learners`    &lt;dbl&gt; 0.042, 0.046, 0.089, 0.109, 0.061, 0.…
$ `# Poverty`                      &lt;chr&gt; "161", "147", "155", "161", "150", "1…
$ `% Poverty`                      &lt;chr&gt; "84.7%", "84.5%", "81.6%", "83.4%", "…
$ `Economic Need Index`            &lt;chr&gt; "89.0%", "88.8%", "86.7%", "86.4%", "…</code></pre>
</div>
<div class="sourceCode cell-code" id="cb14"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a><span class="co">#View(nyc_schools_17_to_22)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb15"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a>nyc_schools_13_to_18</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 8,972 × 39
   DBN   `School Name` Year  `Total Enrollment` Grade PK (Half Day &amp;…¹ `Grade K`
   &lt;chr&gt; &lt;chr&gt;         &lt;chr&gt;              &lt;dbl&gt;                  &lt;dbl&gt;     &lt;dbl&gt;
 1 01M0… P.S. 015 Rob… 2013…                190                     26        39
 2 01M0… P.S. 015 Rob… 2014…                183                     18        27
 3 01M0… P.S. 015 Rob… 2015…                176                     14        32
 4 01M0… P.S. 015 Rob… 2016…                178                     17        28
 5 01M0… P.S. 015 Rob… 2017…                190                     17        28
 6 01M0… P.S. 019 Ash… 2013…                285                     36        39
 7 01M0… P.S. 019 Ash… 2014…                270                     30        44
 8 01M0… P.S. 019 Ash… 2015…                270                     21        47
 9 01M0… P.S. 019 Ash… 2016…                271                     24        37
10 01M0… P.S. 019 Ash… 2017…                257                     13        34
# ℹ 8,962 more rows
# ℹ abbreviated name: ¹​`Grade PK (Half Day &amp; Full Day)`
# ℹ 33 more variables: `Grade 1` &lt;dbl&gt;, `Grade 2` &lt;dbl&gt;, `Grade 3` &lt;dbl&gt;,
#   `Grade 4` &lt;dbl&gt;, `Grade 5` &lt;dbl&gt;, `Grade 6` &lt;dbl&gt;, `Grade 7` &lt;dbl&gt;,
#   `Grade 8` &lt;dbl&gt;, `Grade 9` &lt;dbl&gt;, `Grade 10` &lt;dbl&gt;, `Grade 11` &lt;dbl&gt;,
#   `Grade 12` &lt;dbl&gt;, `# Female` &lt;dbl&gt;, `% Female` &lt;dbl&gt;, `# Male` &lt;dbl&gt;,
#   `% Male` &lt;dbl&gt;, `# Asian` &lt;dbl&gt;, `% Asian` &lt;dbl&gt;, `# Black` &lt;dbl&gt;, …</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb17"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a><span class="fu">glimpse</span>(nyc_schools_13_to_18)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Rows: 8,972
Columns: 39
$ DBN                                          &lt;chr&gt; "01M015", "01M015", "01M0…
$ `School Name`                                &lt;chr&gt; "P.S. 015 Roberto Clement…
$ Year                                         &lt;chr&gt; "2013-14", "2014-15", "20…
$ `Total Enrollment`                           &lt;dbl&gt; 190, 183, 176, 178, 190, …
$ `Grade PK (Half Day &amp; Full Day)`             &lt;dbl&gt; 26, 18, 14, 17, 17, 36, 3…
$ `Grade K`                                    &lt;dbl&gt; 39, 27, 32, 28, 28, 39, 4…
$ `Grade 1`                                    &lt;dbl&gt; 39, 47, 33, 33, 32, 38, 4…
$ `Grade 2`                                    &lt;dbl&gt; 21, 31, 39, 27, 33, 36, 3…
$ `Grade 3`                                    &lt;dbl&gt; 16, 19, 23, 31, 23, 45, 3…
$ `Grade 4`                                    &lt;dbl&gt; 26, 17, 17, 24, 31, 47, 4…
$ `Grade 5`                                    &lt;dbl&gt; 23, 24, 18, 18, 26, 44, 4…
$ `Grade 6`                                    &lt;dbl&gt; 0, 0, 0, 0, 0, 0, 0, 0, 0…
$ `Grade 7`                                    &lt;dbl&gt; 0, 0, 0, 0, 0, 0, 0, 0, 0…
$ `Grade 8`                                    &lt;dbl&gt; 0, 0, 0, 0, 0, 0, 0, 0, 0…
$ `Grade 9`                                    &lt;dbl&gt; 0, 0, 0, 0, 0, 0, 0, 0, 0…
$ `Grade 10`                                   &lt;dbl&gt; 0, 0, 0, 0, 0, 0, 0, 0, 0…
$ `Grade 11`                                   &lt;dbl&gt; 0, 0, 0, 0, 0, 0, 0, 0, 0…
$ `Grade 12`                                   &lt;dbl&gt; 0, 0, 0, 0, 0, 0, 0, 0, 0…
$ `# Female`                                   &lt;dbl&gt; 93, 84, 83, 83, 99, 141, …
$ `% Female`                                   &lt;dbl&gt; 48.9, 45.9, 47.2, 46.6, 5…
$ `# Male`                                     &lt;dbl&gt; 97, 99, 93, 95, 91, 144, …
$ `% Male`                                     &lt;dbl&gt; 51.1, 54.1, 52.8, 53.4, 4…
$ `# Asian`                                    &lt;dbl&gt; 9, 8, 9, 14, 20, 41, 30, …
$ `% Asian`                                    &lt;dbl&gt; 4.7, 4.4, 5.1, 7.9, 10.5,…
$ `# Black`                                    &lt;dbl&gt; 72, 65, 57, 51, 52, 56, 4…
$ `% Black`                                    &lt;dbl&gt; 37.9, 35.5, 32.4, 28.7, 2…
$ `# Hispanic`                                 &lt;dbl&gt; 104, 107, 105, 105, 110, …
$ `% Hispanic`                                 &lt;dbl&gt; 54.7, 58.5, 59.7, 59.0, 5…
$ `# Multiple Race Categories Not Represented` &lt;dbl&gt; 2, 1, 3, 4, 2, 10, 8, 3, …
$ `% Multiple Race Categories Not Represented` &lt;dbl&gt; 1.1, 0.5, 1.7, 2.2, 1.1, …
$ `# White`                                    &lt;dbl&gt; 3, 2, 2, 4, 6, 30, 27, 16…
$ `% White`                                    &lt;dbl&gt; 1.6, 1.1, 1.1, 2.2, 3.2, …
$ `# Students with Disabilities`               &lt;dbl&gt; 65, 64, 60, 51, 45, 89, 8…
$ `% Students with Disabilities`               &lt;dbl&gt; 34.2, 35.0, 34.1, 28.7, 2…
$ `# English Language Learners`                &lt;dbl&gt; 19, 17, 16, 12, 8, 25, 18…
$ `% English Language Learners`                &lt;dbl&gt; 10.0, 9.3, 9.1, 6.7, 4.2,…
$ `# Poverty`                                  &lt;dbl&gt; 171, 169, 149, 152, 161, …
$ `% Poverty`                                  &lt;dbl&gt; 90.0, 92.3, 84.7, 85.4, 8…
$ `Economic Need Index`                        &lt;chr&gt; "No Data", "93.5%", "89.6…</code></pre>
</div>
<div class="sourceCode cell-code" id="cb19"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a><span class="co"># View(nyc_schools_13_to_18)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="data-cleaning" class="level2">
<h2 class="anchored" data-anchor-id="data-cleaning">Data Cleaning</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb20"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a><span class="co"># deleting all rows with the years "2017-18" in nyc_schools_13_to_18</span></span>
<span id="cb20-2"><a href="#cb20-2" aria-hidden="true" tabindex="-1"></a><span class="co"># information is already contained in nyc_schools_17_to_22</span></span>
<span id="cb20-3"><a href="#cb20-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-4"><a href="#cb20-4" aria-hidden="true" tabindex="-1"></a>nyc_schools_13_to_18_fix <span class="ot">&lt;-</span> nyc_schools_13_to_18 <span class="sc">|&gt;</span> </span>
<span id="cb20-5"><a href="#cb20-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(Year <span class="sc">!=</span> <span class="st">"2017-18"</span>) </span>
<span id="cb20-6"><a href="#cb20-6" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb20-7"><a href="#cb20-7" aria-hidden="true" tabindex="-1"></a>nyc_schools_13_to_18_fix</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 7,128 × 39
   DBN   `School Name` Year  `Total Enrollment` Grade PK (Half Day &amp;…¹ `Grade K`
   &lt;chr&gt; &lt;chr&gt;         &lt;chr&gt;              &lt;dbl&gt;                  &lt;dbl&gt;     &lt;dbl&gt;
 1 01M0… P.S. 015 Rob… 2013…                190                     26        39
 2 01M0… P.S. 015 Rob… 2014…                183                     18        27
 3 01M0… P.S. 015 Rob… 2015…                176                     14        32
 4 01M0… P.S. 015 Rob… 2016…                178                     17        28
 5 01M0… P.S. 019 Ash… 2013…                285                     36        39
 6 01M0… P.S. 019 Ash… 2014…                270                     30        44
 7 01M0… P.S. 019 Ash… 2015…                270                     21        47
 8 01M0… P.S. 019 Ash… 2016…                271                     24        37
 9 01M0… P.S. 020 Ann… 2013…                631                     54       114
10 01M0… P.S. 020 Ann… 2014…                633                     51       102
# ℹ 7,118 more rows
# ℹ abbreviated name: ¹​`Grade PK (Half Day &amp; Full Day)`
# ℹ 33 more variables: `Grade 1` &lt;dbl&gt;, `Grade 2` &lt;dbl&gt;, `Grade 3` &lt;dbl&gt;,
#   `Grade 4` &lt;dbl&gt;, `Grade 5` &lt;dbl&gt;, `Grade 6` &lt;dbl&gt;, `Grade 7` &lt;dbl&gt;,
#   `Grade 8` &lt;dbl&gt;, `Grade 9` &lt;dbl&gt;, `Grade 10` &lt;dbl&gt;, `Grade 11` &lt;dbl&gt;,
#   `Grade 12` &lt;dbl&gt;, `# Female` &lt;dbl&gt;, `% Female` &lt;dbl&gt;, `# Male` &lt;dbl&gt;,
#   `% Male` &lt;dbl&gt;, `# Asian` &lt;dbl&gt;, `% Asian` &lt;dbl&gt;, `# Black` &lt;dbl&gt;, …</code></pre>
</div>
</div>
<p>In nyc_schools_13_to_18, “# Poverty” and “% Poverty” are both in double type. In nyc_schools_17_to_22, both are in character strings because there are schools with above 95% poverty, which is written as “Above 95%” in both the “# Poverty” and “% Poverty” and columns.</p>
<p>The chunk below turns the “# Poverty” and “% Poverty” columns in into character strings in nyc_schools_13_to_18 so the two dataset can be merged</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb22"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a>nyc_schools_13_to_18_fix <span class="ot">&lt;-</span> nyc_schools_13_to_18_fix <span class="sc">|&gt;</span> </span>
<span id="cb22-2"><a href="#cb22-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="st">`</span><span class="at">% Poverty</span><span class="st">`</span> <span class="ot">=</span> <span class="fu">as.character</span>(<span class="st">`</span><span class="at">% Poverty</span><span class="st">`</span>), </span>
<span id="cb22-3"><a href="#cb22-3" aria-hidden="true" tabindex="-1"></a>         <span class="st">`</span><span class="at"># Poverty</span><span class="st">`</span> <span class="ot">=</span> <span class="fu">as.character</span>(<span class="st">`</span><span class="at"># Poverty</span><span class="st">`</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Creating a joined data set</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb23"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a>schools <span class="ot">&lt;-</span> </span>
<span id="cb23-2"><a href="#cb23-2" aria-hidden="true" tabindex="-1"></a>  <span class="co"># joining the two data sets.</span></span>
<span id="cb23-3"><a href="#cb23-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">bind_rows</span>(nyc_schools_13_to_18_fix, nyc_schools_17_to_22) <span class="sc">|&gt;</span> </span>
<span id="cb23-4"><a href="#cb23-4" aria-hidden="true" tabindex="-1"></a>  <span class="co"># turn values in Year column from YYYY-YY to YYYY. E.g. 2013-24 to 2013 </span></span>
<span id="cb23-5"><a href="#cb23-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="st">"Year"</span> <span class="ot">=</span> <span class="fu">substr</span>(Year, <span class="dv">1</span>, <span class="dv">4</span>)) <span class="sc">|&gt;</span> </span>
<span id="cb23-6"><a href="#cb23-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(DBN)</span>
<span id="cb23-7"><a href="#cb23-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-8"><a href="#cb23-8" aria-hidden="true" tabindex="-1"></a><span class="co"># turning all column names to snakecase</span></span>
<span id="cb23-9"><a href="#cb23-9" aria-hidden="true" tabindex="-1"></a><span class="fu">colnames</span>(schools) <span class="ot">&lt;-</span> <span class="fu">tolower</span>(<span class="fu">gsub</span>(<span class="st">" "</span>, <span class="st">"_"</span>, <span class="fu">colnames</span>(schools)))</span>
<span id="cb23-10"><a href="#cb23-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-11"><a href="#cb23-11" aria-hidden="true" tabindex="-1"></a><span class="co"># deleting  all '#' in column names to avoid confusing R</span></span>
<span id="cb23-12"><a href="#cb23-12" aria-hidden="true" tabindex="-1"></a><span class="fu">colnames</span>(schools) <span class="ot">&lt;-</span> <span class="fu">gsub</span>(<span class="st">"#_"</span>, <span class="st">""</span>, <span class="fu">colnames</span>(schools))</span>
<span id="cb23-13"><a href="#cb23-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-14"><a href="#cb23-14" aria-hidden="true" tabindex="-1"></a><span class="co"># turning all "%" in column names to "percent" to avoid confusing R</span></span>
<span id="cb23-15"><a href="#cb23-15" aria-hidden="true" tabindex="-1"></a><span class="fu">colnames</span>(schools) <span class="ot">&lt;-</span> <span class="fu">gsub</span>(<span class="st">"%"</span>, <span class="st">"percent"</span>, <span class="fu">colnames</span>(schools))</span>
<span id="cb23-16"><a href="#cb23-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-17"><a href="#cb23-17" aria-hidden="true" tabindex="-1"></a>schools </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 16,379 × 46
   dbn    school_name      year  total_enrollment grade_pk_(half_day_&amp;…¹ grade_k
   &lt;chr&gt;  &lt;chr&gt;            &lt;chr&gt;            &lt;dbl&gt;                  &lt;dbl&gt;   &lt;dbl&gt;
 1 01M015 P.S. 015 Robert… 2013               190                     26      39
 2 01M015 P.S. 015 Robert… 2014               183                     18      27
 3 01M015 P.S. 015 Robert… 2015               176                     14      32
 4 01M015 P.S. 015 Robert… 2016               178                     17      28
 5 01M015 P.S. 015 Robert… 2017               190                     17      28
 6 01M015 P.S. 015 Robert… 2018               174                     13      20
 7 01M015 P.S. 015 Robert… 2019               190                     14      29
 8 01M015 P.S. 015 Robert… 2020               193                     17      29
 9 01M015 P.S. 015 Robert… 2021               179                     15      30
10 01M019 P.S. 019 Asher … 2013               285                     36      39
# ℹ 16,369 more rows
# ℹ abbreviated name: ¹​`grade_pk_(half_day_&amp;_full_day)`
# ℹ 40 more variables: grade_1 &lt;dbl&gt;, grade_2 &lt;dbl&gt;, grade_3 &lt;dbl&gt;,
#   grade_4 &lt;dbl&gt;, grade_5 &lt;dbl&gt;, grade_6 &lt;dbl&gt;, grade_7 &lt;dbl&gt;, grade_8 &lt;dbl&gt;,
#   grade_9 &lt;dbl&gt;, grade_10 &lt;dbl&gt;, grade_11 &lt;dbl&gt;, grade_12 &lt;dbl&gt;,
#   female &lt;dbl&gt;, percent_female &lt;dbl&gt;, male &lt;dbl&gt;, percent_male &lt;dbl&gt;,
#   asian &lt;dbl&gt;, percent_asian &lt;dbl&gt;, black &lt;dbl&gt;, percent_black &lt;dbl&gt;, …</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb25"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb25-1"><a href="#cb25-1" aria-hidden="true" tabindex="-1"></a><span class="co"># organizing columns so they make sense </span></span>
<span id="cb25-2"><a href="#cb25-2" aria-hidden="true" tabindex="-1"></a>schools <span class="ot">&lt;-</span> schools <span class="sc">|&gt;</span> </span>
<span id="cb25-3"><a href="#cb25-3" aria-hidden="true" tabindex="-1"></a>  <span class="co"># deleting grade_3k because most schools don't have information on it. </span></span>
<span id="cb25-4"><a href="#cb25-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="sc">-</span>grade_3k) <span class="sc">|&gt;</span> </span>
<span id="cb25-5"><a href="#cb25-5" aria-hidden="true" tabindex="-1"></a>  <span class="co"># putting all the race and ethnicity columns next to each other </span></span>
<span id="cb25-6"><a href="#cb25-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="dv">1</span><span class="sc">:</span><span class="st">`</span><span class="at">percent_white</span><span class="st">`</span>, </span>
<span id="cb25-7"><a href="#cb25-7" aria-hidden="true" tabindex="-1"></a>         <span class="st">`</span><span class="at">multi-racial</span><span class="st">`</span>, </span>
<span id="cb25-8"><a href="#cb25-8" aria-hidden="true" tabindex="-1"></a>         <span class="st">`</span><span class="at">percent_multi-racial</span><span class="st">`</span>, </span>
<span id="cb25-9"><a href="#cb25-9" aria-hidden="true" tabindex="-1"></a>         <span class="st">`</span><span class="at">native_american</span><span class="st">`</span>, </span>
<span id="cb25-10"><a href="#cb25-10" aria-hidden="true" tabindex="-1"></a>         <span class="st">`</span><span class="at">percent_native_american</span><span class="st">`</span>, </span>
<span id="cb25-11"><a href="#cb25-11" aria-hidden="true" tabindex="-1"></a>         <span class="st">`</span><span class="at">missing_race/ethnicity_data</span><span class="st">`</span>, </span>
<span id="cb25-12"><a href="#cb25-12" aria-hidden="true" tabindex="-1"></a>         <span class="st">`</span><span class="at">percent_missing_race/ethnicity_data</span><span class="st">`</span>,           </span>
<span id="cb25-13"><a href="#cb25-13" aria-hidden="true" tabindex="-1"></a>         <span class="fu">everything</span>())</span>
<span id="cb25-14"><a href="#cb25-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-15"><a href="#cb25-15" aria-hidden="true" tabindex="-1"></a>schools</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 16,379 × 45
   dbn    school_name      year  total_enrollment grade_pk_(half_day_&amp;…¹ grade_k
   &lt;chr&gt;  &lt;chr&gt;            &lt;chr&gt;            &lt;dbl&gt;                  &lt;dbl&gt;   &lt;dbl&gt;
 1 01M015 P.S. 015 Robert… 2013               190                     26      39
 2 01M015 P.S. 015 Robert… 2014               183                     18      27
 3 01M015 P.S. 015 Robert… 2015               176                     14      32
 4 01M015 P.S. 015 Robert… 2016               178                     17      28
 5 01M015 P.S. 015 Robert… 2017               190                     17      28
 6 01M015 P.S. 015 Robert… 2018               174                     13      20
 7 01M015 P.S. 015 Robert… 2019               190                     14      29
 8 01M015 P.S. 015 Robert… 2020               193                     17      29
 9 01M015 P.S. 015 Robert… 2021               179                     15      30
10 01M019 P.S. 019 Asher … 2013               285                     36      39
# ℹ 16,369 more rows
# ℹ abbreviated name: ¹​`grade_pk_(half_day_&amp;_full_day)`
# ℹ 39 more variables: grade_1 &lt;dbl&gt;, grade_2 &lt;dbl&gt;, grade_3 &lt;dbl&gt;,
#   grade_4 &lt;dbl&gt;, grade_5 &lt;dbl&gt;, grade_6 &lt;dbl&gt;, grade_7 &lt;dbl&gt;, grade_8 &lt;dbl&gt;,
#   grade_9 &lt;dbl&gt;, grade_10 &lt;dbl&gt;, grade_11 &lt;dbl&gt;, grade_12 &lt;dbl&gt;,
#   female &lt;dbl&gt;, percent_female &lt;dbl&gt;, male &lt;dbl&gt;, percent_male &lt;dbl&gt;,
#   asian &lt;dbl&gt;, percent_asian &lt;dbl&gt;, black &lt;dbl&gt;, percent_black &lt;dbl&gt;, …</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb27"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb27-1"><a href="#cb27-1" aria-hidden="true" tabindex="-1"></a><span class="co"># cleaning column content structure and type </span></span>
<span id="cb27-2"><a href="#cb27-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb27-3"><a href="#cb27-3" aria-hidden="true" tabindex="-1"></a>schools <span class="ot">&lt;-</span> schools <span class="sc">|&gt;</span> </span>
<span id="cb27-4"><a href="#cb27-4" aria-hidden="true" tabindex="-1"></a>  <span class="co"># turning all "No Data" to N/A in economic_need_index column </span></span>
<span id="cb27-5"><a href="#cb27-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">economic_need_index =</span> <span class="fu">ifelse</span>(economic_need_index <span class="sc">==</span> <span class="st">"No Data"</span>, <span class="cn">NA</span>, </span>
<span id="cb27-6"><a href="#cb27-6" aria-hidden="true" tabindex="-1"></a>                                      economic_need_index)) <span class="sc">|&gt;</span> </span>
<span id="cb27-7"><a href="#cb27-7" aria-hidden="true" tabindex="-1"></a>  <span class="co"># turning percentage and character values to numeric </span></span>
<span id="cb27-8"><a href="#cb27-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="st">`</span><span class="at">percent_poverty</span><span class="st">`</span> <span class="ot">=</span> <span class="fu">as.numeric</span>(<span class="fu">gsub</span>(<span class="st">"%"</span>, <span class="st">""</span>, <span class="st">`</span><span class="at">percent_poverty</span><span class="st">`</span>))) <span class="sc">|&gt;</span> </span>
<span id="cb27-9"><a href="#cb27-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="st">`</span><span class="at">economic_need_index</span><span class="st">`</span> <span class="ot">=</span> </span>
<span id="cb27-10"><a href="#cb27-10" aria-hidden="true" tabindex="-1"></a>           <span class="fu">as.numeric</span>(<span class="fu">gsub</span>(<span class="st">"%"</span>, <span class="st">""</span>, <span class="st">`</span><span class="at">economic_need_index</span><span class="st">`</span>))) <span class="sc">|&gt;</span> </span>
<span id="cb27-11"><a href="#cb27-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="st">`</span><span class="at">poverty</span><span class="st">`</span> <span class="ot">=</span> <span class="fu">as.numeric</span>(<span class="st">`</span><span class="at">poverty</span><span class="st">`</span>)) <span class="sc">|&gt;</span> </span>
<span id="cb27-12"><a href="#cb27-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="st">`</span><span class="at">year</span><span class="st">`</span> <span class="ot">=</span> <span class="fu">as.numeric</span>(<span class="st">`</span><span class="at">year</span><span class="st">`</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: There was 1 warning in `mutate()`.
ℹ In argument: `percent_poverty = as.numeric(gsub("%", "", percent_poverty))`.
Caused by warning:
! NAs introduced by coercion</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: There was 1 warning in `mutate()`.
ℹ In argument: `economic_need_index = as.numeric(gsub("%", "",
  economic_need_index))`.
Caused by warning:
! NAs introduced by coercion</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: There was 1 warning in `mutate()`.
ℹ In argument: `poverty = as.numeric(poverty)`.
Caused by warning:
! NAs introduced by coercion</code></pre>
</div>
<div class="sourceCode cell-code" id="cb31"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb31-1"><a href="#cb31-1" aria-hidden="true" tabindex="-1"></a>schools</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 16,379 × 45
   dbn    school_name       year total_enrollment grade_pk_(half_day_&amp;…¹ grade_k
   &lt;chr&gt;  &lt;chr&gt;            &lt;dbl&gt;            &lt;dbl&gt;                  &lt;dbl&gt;   &lt;dbl&gt;
 1 01M015 P.S. 015 Robert…  2013              190                     26      39
 2 01M015 P.S. 015 Robert…  2014              183                     18      27
 3 01M015 P.S. 015 Robert…  2015              176                     14      32
 4 01M015 P.S. 015 Robert…  2016              178                     17      28
 5 01M015 P.S. 015 Robert…  2017              190                     17      28
 6 01M015 P.S. 015 Robert…  2018              174                     13      20
 7 01M015 P.S. 015 Robert…  2019              190                     14      29
 8 01M015 P.S. 015 Robert…  2020              193                     17      29
 9 01M015 P.S. 015 Robert…  2021              179                     15      30
10 01M019 P.S. 019 Asher …  2013              285                     36      39
# ℹ 16,369 more rows
# ℹ abbreviated name: ¹​`grade_pk_(half_day_&amp;_full_day)`
# ℹ 39 more variables: grade_1 &lt;dbl&gt;, grade_2 &lt;dbl&gt;, grade_3 &lt;dbl&gt;,
#   grade_4 &lt;dbl&gt;, grade_5 &lt;dbl&gt;, grade_6 &lt;dbl&gt;, grade_7 &lt;dbl&gt;, grade_8 &lt;dbl&gt;,
#   grade_9 &lt;dbl&gt;, grade_10 &lt;dbl&gt;, grade_11 &lt;dbl&gt;, grade_12 &lt;dbl&gt;,
#   female &lt;dbl&gt;, percent_female &lt;dbl&gt;, male &lt;dbl&gt;, percent_male &lt;dbl&gt;,
#   asian &lt;dbl&gt;, percent_asian &lt;dbl&gt;, black &lt;dbl&gt;, percent_black &lt;dbl&gt;, …</code></pre>
</div>
</div>
</section>
</section>
<section id="data-description" class="level1">
<h1>Data description</h1>
<p>Have an initial draft of your data description section. Your data description should be about your analysis-ready data.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb33"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb33-1"><a href="#cb33-1" aria-hidden="true" tabindex="-1"></a><span class="co"># glimpse of the analysis-ready data set </span></span>
<span id="cb33-2"><a href="#cb33-2" aria-hidden="true" tabindex="-1"></a><span class="fu">glimpse</span>(schools)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Rows: 16,379
Columns: 45
$ dbn                                              &lt;chr&gt; "01M015", "01M015", "…
$ school_name                                      &lt;chr&gt; "P.S. 015 Roberto Cle…
$ year                                             &lt;dbl&gt; 2013, 2014, 2015, 201…
$ total_enrollment                                 &lt;dbl&gt; 190, 183, 176, 178, 1…
$ `grade_pk_(half_day_&amp;_full_day)`                 &lt;dbl&gt; 26, 18, 14, 17, 17, 1…
$ grade_k                                          &lt;dbl&gt; 39, 27, 32, 28, 28, 2…
$ grade_1                                          &lt;dbl&gt; 39, 47, 33, 33, 32, 3…
$ grade_2                                          &lt;dbl&gt; 21, 31, 39, 27, 33, 3…
$ grade_3                                          &lt;dbl&gt; 16, 19, 23, 31, 23, 3…
$ grade_4                                          &lt;dbl&gt; 26, 17, 17, 24, 31, 2…
$ grade_5                                          &lt;dbl&gt; 23, 24, 18, 18, 26, 2…
$ grade_6                                          &lt;dbl&gt; 0, 0, 0, 0, 0, 0, 0, …
$ grade_7                                          &lt;dbl&gt; 0, 0, 0, 0, 0, 0, 0, …
$ grade_8                                          &lt;dbl&gt; 0, 0, 0, 0, 0, 0, 0, …
$ grade_9                                          &lt;dbl&gt; 0, 0, 0, 0, 0, 0, 0, …
$ grade_10                                         &lt;dbl&gt; 0, 0, 0, 0, 0, 0, 0, …
$ grade_11                                         &lt;dbl&gt; 0, 0, 0, 0, 0, 0, 0, …
$ grade_12                                         &lt;dbl&gt; 0, 0, 0, 0, 0, 0, 0, …
$ female                                           &lt;dbl&gt; 93, 84, 83, 83, 99, 8…
$ percent_female                                   &lt;dbl&gt; 48.900, 45.900, 47.20…
$ male                                             &lt;dbl&gt; 97, 99, 93, 95, 91, 8…
$ percent_male                                     &lt;dbl&gt; 51.100, 54.100, 52.80…
$ asian                                            &lt;dbl&gt; 9, 8, 9, 14, 20, 24, …
$ percent_asian                                    &lt;dbl&gt; 4.700, 4.400, 5.100, …
$ black                                            &lt;dbl&gt; 72, 65, 57, 51, 52, 4…
$ percent_black                                    &lt;dbl&gt; 37.900, 35.500, 32.40…
$ hispanic                                         &lt;dbl&gt; 104, 107, 105, 105, 1…
$ percent_hispanic                                 &lt;dbl&gt; 54.700, 58.500, 59.70…
$ multiple_race_categories_not_represented         &lt;dbl&gt; 2, 1, 3, 4, NA, NA, N…
$ percent_multiple_race_categories_not_represented &lt;dbl&gt; 1.1, 0.5, 1.7, 2.2, N…
$ white                                            &lt;dbl&gt; 3, 2, 2, 4, 6, 6, 9, …
$ percent_white                                    &lt;dbl&gt; 1.600, 1.100, 1.100, …
$ `multi-racial`                                   &lt;dbl&gt; NA, NA, NA, NA, 1, 0,…
$ `percent_multi-racial`                           &lt;dbl&gt; NA, NA, NA, NA, 0.005…
$ native_american                                  &lt;dbl&gt; NA, NA, NA, NA, 1, 1,…
$ percent_native_american                          &lt;dbl&gt; NA, NA, NA, NA, 0.005…
$ `missing_race/ethnicity_data`                    &lt;dbl&gt; NA, NA, NA, NA, 0, 0,…
$ `percent_missing_race/ethnicity_data`            &lt;dbl&gt; NA, NA, NA, NA, 0.000…
$ students_with_disabilities                       &lt;dbl&gt; 65, 64, 60, 51, 49, 3…
$ percent_students_with_disabilities               &lt;dbl&gt; 34.200, 35.000, 34.10…
$ english_language_learners                        &lt;dbl&gt; 19, 17, 16, 12, 8, 8,…
$ percent_english_language_learners                &lt;dbl&gt; 10.000, 9.300, 9.100,…
$ poverty                                          &lt;dbl&gt; 171, 169, 149, 152, 1…
$ percent_poverty                                  &lt;dbl&gt; 90.0, 92.3, 84.7, 85.…
$ economic_need_index                              &lt;dbl&gt; NA, 93.5, 89.6, 89.2,…</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb35"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb35-1"><a href="#cb35-1" aria-hidden="true" tabindex="-1"></a><span class="fu">write.csv</span>(schools, <span class="st">"schools.csv"</span>, <span class="at">row.names=</span><span class="cn">FALSE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>If using real-world data, describe it. A good model for this is presented in Gebru et al, 2018. Answer any relevant questions from sections 3.1-3.5 of the Gebru et al article, especially the following questions:</p>
<section id="first-some-notes" class="level2">
<h2 class="anchored" data-anchor-id="first-some-notes">First, some notes:</h2>
<ul>
<li><p>DBN (District Borough Number) is the combination of the District Number, the letter code for the borough, and the number of the school.</p></li>
<li><p>The Economic Need Index refers to the estimated percentage of students facing economic hardship.</p></li>
</ul>
</section>
<section id="what-are-the-observations-rows-and-the-attributes-columns" class="level2">
<h2 class="anchored" data-anchor-id="what-are-the-observations-rows-and-the-attributes-columns">What are the observations (rows) and the attributes (columns)?</h2>
<p>The schools dataset contains 46 attributes (columns) and 16,379 observations (rows). The dataset is arranged by DBN of schools in NYC, with the same DBN and school name but increasing years in consecutive rows. In other words, the grain of the dataset is in one row/record per school per year.</p>
<p>Descriptive information for each school includes: school_name and dbn.</p>
<p>Year goes from 2013 to 2021 for each school.</p>
<p>Demographic attributes for each school includes: - total_enrollment</p>
<ul>
<li><p>enrollment by grade level (from grade_pk to grade_12)</p></li>
<li><p>quantity of student sexes (female, male)</p></li>
<li><p>proportions of student sexes (percent_female, percent_male)</p></li>
<li><p>quantity of students from different race and ethnicity</p></li>
<li><p>proportions of students from different race and ethnicity</p></li>
<li><p>quantity and proportions of students experiencing poverty</p></li>
</ul>
</section>
<section id="why-was-this-dataset-created" class="level2">
<h2 class="anchored" data-anchor-id="why-was-this-dataset-created">Why was this dataset created?</h2>
<p>This dataset is created by the city of New York City about a comprehensive overview of student demographics across NYC schools. This data can help stakeholders, including policymakers, educators, and researchers to understand the diverse student population within NYC and make informed decisions related to educational programs, resources allocation, and policy planning.</p>
</section>
<section id="who-funded-the-creation-of-the-dataset" class="level2">
<h2 class="anchored" data-anchor-id="who-funded-the-creation-of-the-dataset">Who funded the creation of the dataset?</h2>
<p>The dataset appears to be related to NYC schools, so it was likely funded and maintained by the New York City Department of Education or a related governmental body.</p>
</section>
<section id="what-processes-might-have-influenced-what-data-was-observed-and-recorded-and-what-was-not" class="level2">
<h2 class="anchored" data-anchor-id="what-processes-might-have-influenced-what-data-was-observed-and-recorded-and-what-was-not">What processes might have influenced what data was observed and recorded and what was not?</h2>
<p>The data within the data set needed to be measurable. It’s likely that this data set came from a larger data set with more comprehensive data related to all things related to education. This data set specifically focuses on student’s ethnicity, disability, and economic status.</p>
<p>One factor that we noticed is that these are aggregate data without further breakdown of individuals. This is likely due to privacy concerns to mask student identities.</p>
</section>
<section id="what-preprocessing-was-done-and-how-did-the-data-come-to-be-in-the-form-that-you-are-using" class="level2">
<h2 class="anchored" data-anchor-id="what-preprocessing-was-done-and-how-did-the-data-come-to-be-in-the-form-that-you-are-using">What preprocessing was done, and how did the data come to be in the form that you are using?</h2>
<p>As mentioned above, this data set is aggregated. The data is likely gathered from various schools and centralized into a single data set.</p>
<ul>
<li><p>Aggregations were performed to calculate percentages and other metrics.</p></li>
<li><p>Missing data, especially the ones related to the Economic Need Index, might have been derived from aggregated data using averages or other methods.</p></li>
<li><p>To ensure privacy, certain values were replaced with generic labels like “Below 5%” and “Above 95%”.</p></li>
<li><p>Data might have been cleaned and standardized to ensure consistency across the data set.</p></li>
</ul>
</section>
<section id="if-people-are-involved-were-they-aware-of-the-data-collection-and-if-so-what-purpose-did-they-expect-the-data-to-be-used-for" class="level2">
<h2 class="anchored" data-anchor-id="if-people-are-involved-were-they-aware-of-the-data-collection-and-if-so-what-purpose-did-they-expect-the-data-to-be-used-for">If people are involved, were they aware of the data collection and if so, what purpose did they expect the data to be used for?</h2>
<p>Given that this data is related to public schools and is likely that parents have signed something that allowed the school to collect their information for official and administrative purposes. Parents, guardians, and school staff were probably aware of the data collection. They might have expected the data to be used for administrative purposes, policy planning, resource allocation, and to assess the needs of the student population.</p>
<p>Especially in public schools, economic status information could be derived from things like subsidy or food stamps. The race, gender, English level and age are basic information that are collected upon school enrollment.</p>
</section>
</section>
<section id="data-limitations" class="level1">
<h1>Data limitations</h1>
<section id="identify-any-potential-problems-with-your-dataset." class="level2">
<h2 class="anchored" data-anchor-id="identify-any-potential-problems-with-your-dataset.">Identify any potential problems with your dataset.</h2>
<ul>
<li><p>no school types</p></li>
<li><p>only public schools</p></li>
<li><p><strong>Scope of Data</strong>: The data set only includes public schools, so the findings may not be representative of private, charter, or other types of schools in NYC.</p></li>
<li><p><strong>Variable Definitions are not unified</strong></p>
<p>Inconsistent Definitions: Definitions of key variables, like “economic need” or “English language learners,” may have evolved over time, affecting trend analyses.</p>
<p>Categorical Limitations: Categories such as race/ethnicity and economic status are often complex and may not be captured fully by the available data.</p></li>
<li><p><strong>Covid-19 Impact</strong>: The pandemic’s impact started in early 2020, so data from 2017-18 and 2018-19 might not capture the pre-pandemic baseline accurately.</p></li>
</ul>
</section>
</section>
<section id="exploratory-data-analysis" class="level1">
<h1>Exploratory data analysis</h1>
<p>Perform an (initial) exploratory data analysis.</p>
<p>The dataset breaks down enrollment by grade level and demographic attributes (such as race/ethnicity, gender, economic need, and English learner status) for each school. This is conducive to comprehensive analysis, for example, one can examine racial diversity within specific grades in different schools, or analyze enrollment trends of English learners over the years. The same data can be used to understand the percentage of minorities in schools, which can help in the allocation and balance of special education resources and services</p>
<section id="we-posed-questions-such-as-1" class="level2">
<h2 class="anchored" data-anchor-id="we-posed-questions-such-as-1">We posed questions such as:</h2>
<ul>
<li><p>How did covid-19 affect school enrollment? Including total enrollment, enrollment by grade level (PK-12).</p></li>
<li><p>How did covid-19 effect the enrollment of schools with different levels of funding? Are underserved schools affect more than schools with sufficient fundings.</p></li>
<li><p>Did Covid-19 disproportionately affect school enrollment of minorities student/students of color?</p></li>
<li><p>Did Covid-19 disproportionately affect school enrollment of students with disabilities?</p></li>
<li><p>Did Covid-19 disproportionately affect school enrollment of students in poverty?</p></li>
<li><p>Did Covid-19 disproportionately affect school enrollment of students who have challenges in leaning with the Anglish language?</p></li>
</ul>
</section>
</section>
<section id="questions-for-reviewers" class="level1">
<h1>Questions for reviewers</h1>
<p>List specific questions for your peer reviewers and project mentor to answer in giving you feedback on this phase.</p>
<p>Based on the initial exploratory data analysis, do the findings seem valid and are they presented clearly?</p>
<p>Are there any other angles or sub-questions that could add depth to the research?</p>
<p>Are there any critical aspects of the project that seem to be missing or need rethinking?</p>


</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->



</body></html>