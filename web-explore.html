<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.3.450">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>Project title</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>


</head>

<body class="nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg navbar-dark ">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container">
    <a class="navbar-brand" href="./index.html">
    <span class="navbar-title">Analyzing Impact of COVID-19 on NYC School Populations</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="dropdown-header">
 <span class="menu-text">Home</span></li>
  <li class="nav-item">
    <a class="nav-link" href="./index.html" rel="" target="">
 <span class="menu-text">TEAM NAME</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="./proposal.html" rel="" target="">
 <span class="menu-text">Proposal</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="./explore.html" rel="" target="">
 <span class="menu-text">Exploratory data analysis</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="./presentation.html" rel="" target="">
 <span class="menu-text">Presentation</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="./report.html" rel="" target="">
 <span class="menu-text">Report</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="./appendices.html" rel="" target="">
 <span class="menu-text">Appendices</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="./about.html" rel="" target="">
 <span class="menu-text">About</span></a>
  </li>  
</ul>
            <div class="quarto-navbar-tools ms-auto">
</div>
          </div> <!-- /navcollapse -->
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#turning-all-column-names-to-snakecase" id="toc-turning-all-column-names-to-snakecase" class="nav-link active" data-scroll-target="#turning-all-column-names-to-snakecase">turning all column names to snakecase</a></li>
  <li><a href="#deleting-all-in-column-names-to-avoid-confusing-r" id="toc-deleting-all-in-column-names-to-avoid-confusing-r" class="nav-link" data-scroll-target="#deleting-all-in-column-names-to-avoid-confusing-r">deleting all ‘#’ in column names to avoid confusing R</a></li>
  <li><a href="#turning-all-in-column-names-to-percent-to-avoid-confusing-r" id="toc-turning-all-in-column-names-to-percent-to-avoid-confusing-r" class="nav-link" data-scroll-target="#turning-all-in-column-names-to-percent-to-avoid-confusing-r">turning all “%” in column names to “percent” to avoid confusing R</a></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Project title</h1>
<p class="subtitle lead">Exploration</p>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  

</header>

<p>{r} library(readr) library(tidyr) library(ggplot2) library(dplyr) library(snakecase)</p>
<p>Objective(s)</p>
<p>State the question(s) you are answering or the problem(s) you are solving clearly.</p>
<p>The data contains demographic information for NYC schools between the years 2013 (2013-14) and 2021 (2021-22). Our objective for this project is to explore how Covid-19 affects the NYC schools. We will consider how COVID affected education through attributes such as race, disability, economic status, etc. Covid-19 started affecting schools in the US during March 2019.</p>
<p>We posed questions such as:</p>
<p>How did covid-19 affect school enrollment? Including total enrollment, enrollment by grade level (PK-12).</p>
<p>How did covid-19 effect the enrollment of schools with different levels of funding? Are underserved schools affect more than schools with sufficient fundings.</p>
<p>Did Covid-19 disproportionately affect school enrollment of minorities student/students of color?</p>
<p>Did Covid-19 disproportionately affect school enrollment of students with disabilities?</p>
<p>Did Covid-19 disproportionately affect school enrollment of students in poverty?</p>
<p>Did Covid-19 disproportionately affect school enrollment of students who have challenges in leaning with the Anglish language?</p>
<p>Note: DBN (District Borough Number) is the combination of the District Number, the letter code for the borough, and the number of the school</p>
<p>Data import and cleaning</p>
<p>Have an initial draft of your data cleaning appendix. Document every step that takes your raw data file(s) and turns it into the analysis-ready data set that you would submit with your final project. Include text narrative describing your data collection (downloading, scraping, surveys, etc) and any additional data curation/cleaning (merging data frames, filtering, transformations of variables, etc). Include code for data curation/cleaning, but not collection.</p>
<p>{r} # upload data</p>
<p>nyc_schools_17_to_22 &lt;- read_csv(“2017-18__-_2021-22_Demographic_Snapshot_20231020.csv”)</p>
<p>nyc_schools_13_to_18 &lt;- read_csv(“2013_-_2018_Demographic_Snapshot_School_20231024.csv”)</p>
<p>Sources of data</p>
<p>nyc_schools_17_to_22: source: https://data.cityofnewyork.us/Education/2017-18-2021-22-Demographic-Snapshot/c7ru-d68s data provided by New York City Department of Education</p>
<p>nyc_schools_13_to_18: source: https://data.cityofnewyork.us/Education/2013-2018-Demographic-Snapshot-School/s52a-8aq6 data provided by New York City Department of Education</p>
<p>Initial views of the data</p>
<p>{r} nyc_schools_17_to_22</p>
<p>{r} #glimpse of data</p>
<p>glimpse(nyc_schools_17_to_22)</p>
<p>#View(nyc_schools_17_to_22)</p>
<p>{r} nyc_schools_13_to_18</p>
<p>{r} glimpse(nyc_schools_13_to_18) # View(nyc_schools_13_to_18)</p>
<p>Data Cleaning</p>
<p>{r} # deleting all rows with the years “2017-18” in nyc_schools_13_to_18 # information is already contained in nyc_schools_17_to_22</p>
<p>nyc_schools_13_to_18_fix &lt;- nyc_schools_13_to_18 |&gt; filter(Year != “2017-18”)</p>
<p>nyc_schools_13_to_18_fix</p>
<p>In nyc_schools_13_to_18, “# Poverty” and “% Poverty” are both in double type. In nyc_schools_17_to_22, both are in character strings because there are schools with above 95% poverty, which is written as “Above 95%” in both the “# Poverty” and “% Poverty” and columns.</p>
<p>The chunk below turns the “# Poverty” and “% Poverty” columns in into character strings in nyc_schools_13_to_18 so the two dataset can be merged</p>
<p>{r}</p>
<p>nyc_schools_13_to_18_fix &lt;- nyc_schools_13_to_18_fix |&gt; mutate(<code>% Poverty</code> = as.character(<code>% Poverty</code>), <code># Poverty</code> = as.character(<code># Poverty</code>))</p>
<p>Creating a joined data set</p>
<p>{r} schools &lt;- # joining the two data sets. bind_rows(nyc_schools_13_to_18_fix, nyc_schools_17_to_22) |&gt; # turn values in Year column from YYYY-YY to YYYY. E.g. 2013-24 to 2013 mutate(“Year” = substr(Year, 1, 4)) |&gt; arrange(DBN)</p>
<section id="turning-all-column-names-to-snakecase" class="level1">
<h1>turning all column names to snakecase</h1>
<p>colnames(schools) &lt;- tolower(gsub(” “,”_“, colnames(schools)))</p>
</section>
<section id="deleting-all-in-column-names-to-avoid-confusing-r" class="level1">
<h1>deleting all ‘#’ in column names to avoid confusing R</h1>
<p>colnames(schools) &lt;- gsub(“#_“,”“, colnames(schools))</p>
</section>
<section id="turning-all-in-column-names-to-percent-to-avoid-confusing-r" class="level1">
<h1>turning all “%” in column names to “percent” to avoid confusing R</h1>
<p>colnames(schools) &lt;- gsub(“%”, “percent”, colnames(schools))</p>
<p>schools</p>
<p>{r} # organizing columns so they make sense schools &lt;- schools |&gt; # deleting grade_3k because most schools don’t have information on it. select(-grade_3k) |&gt; # putting all the race and ethnicity columns next to each other select(1:<code>percent_white</code>, <code>multi-racial</code>, <code>percent_multi-racial</code>, <code>native_american</code>, <code>percent_native_american</code>, <code>missing_race/ethnicity_data</code>, <code>percent_missing_race/ethnicity_data</code>,<br>
everything())</p>
<p>schools</p>
<p>{r} # cleaning column content structure and type</p>
<p>schools &lt;- schools |&gt; # turning all “No Data” to N/A in economic_need_index column mutate(economic_need_index = ifelse(economic_need_index == “No Data”, NA, economic_need_index)) |&gt; # turning percentage and character values to numeric mutate(<code>percent_poverty</code> = as.numeric(gsub(“%”, ““, <code>percent_poverty</code>))) |&gt; mutate(<code>economic_need_index</code> = as.numeric(gsub(”%“,”“, <code>economic_need_index</code>))) |&gt; mutate(<code>poverty</code> = as.numeric(<code>poverty</code>)) |&gt; mutate(<code>year</code> = as.numeric(<code>year</code>))</p>
<p>schools</p>
<p>Data description</p>
<p>Have an initial draft of your data description section. Your data description should be about your analysis-ready data.</p>
<p>{r} # glimpse of the analysis-ready data set glimpse(schools)</p>
<p>{r} write.csv(schools, “schools.csv”, row.names=FALSE)</p>
<p>If using real-world data, describe it. A good model for this is presented in Gebru et al, 2018. Answer any relevant questions from sections 3.1-3.5 of the Gebru et al article, especially the following questions:</p>
<p>First, some notes:</p>
<p>DBN (District Borough Number) is the combination of the District Number, the letter code for the borough, and the number of the school.</p>
<p>The Economic Need Index refers to the estimated percentage of students facing economic hardship.</p>
<p>What are the observations (rows) and the attributes (columns)?</p>
<p>The schools dataset contains 46 attributes (columns) and 16,379 observations (rows). The dataset is arranged by DBN of schools in NYC, with the same DBN and school name but increasing years in consecutive rows. In other words, the grain of the dataset is in one row/record per school per year.</p>
<p>Descriptive information for each school includes: school_name and dbn.</p>
<p>Year goes from 2013 to 2021 for each school.</p>
<p>Demographic attributes for each school includes: - total_enrollment</p>
<p>enrollment by grade level (from grade_pk to grade_12)</p>
<p>quantity of student sexes (female, male)</p>
<p>proportions of student sexes (percent_female, percent_male)</p>
<p>quantity of students from different race and ethnicity</p>
<p>proportions of students from different race and ethnicity</p>
<p>quantity and proportions of students experiencing poverty</p>
<p>Why was this dataset created?</p>
<p>This dataset is created by the city of New York City about a comprehensive overview of student demographics across NYC schools. This data can help stakeholders, including policymakers, educators, and researchers to understand the diverse student population within NYC and make informed decisions related to educational programs, resources allocation, and policy planning.</p>
<p>Who funded the creation of the dataset?</p>
<p>The dataset appears to be related to NYC schools, so it was likely funded and maintained by the New York City Department of Education or a related governmental body.</p>
<p>What processes might have influenced what data was observed and recorded and what was not?</p>
<p>The data within the data set needed to be measurable. It’s likely that this data set came from a larger data set with more comprehensive data related to all things related to education. This data set specifically focuses on student’s ethnicity, disability, and economic status.</p>
<p>One factor that we noticed is that these are aggregate data without further breakdown of individuals. This is likely due to privacy concerns to mask student identities.</p>
<p>What preprocessing was done, and how did the data come to be in the form that you are using?</p>
<p>As mentioned above, this data set is aggregated. The data is likely gathered from various schools and centralized into a single data set.</p>
<p>Aggregations were performed to calculate percentages and other metrics.</p>
<p>Missing data, especially the ones related to the Economic Need Index, might have been derived from aggregated data using averages or other methods.</p>
<p>To ensure privacy, certain values were replaced with generic labels like “Below 5%” and “Above 95%”.</p>
<p>Data might have been cleaned and standardized to ensure consistency across the data set.</p>
<p>If people are involved, were they aware of the data collection and if so, what purpose did they expect the data to be used for?</p>
<p>Given that this data is related to public schools and is likely that parents have signed something that allowed the school to collect their information for official and administrative purposes. Parents, guardians, and school staff were probably aware of the data collection. They might have expected the data to be used for administrative purposes, policy planning, resource allocation, and to assess the needs of the student population.</p>
<p>Especially in public schools, economic status information could be derived from things like subsidy or food stamps. The race, gender, English level and age are basic information that are collected upon school enrollment.</p>
<p>Data limitations</p>
<p>Identify any potential problems with your dataset.</p>
<p>no school types</p>
<p>only public schools</p>
<p>Scope of Data: The data set only includes public schools, so the findings may not be representative of private, charter, or other types of schools in NYC.</p>
<p>Variable Definitions are not unified</p>
<p>Inconsistent Definitions: Definitions of key variables, like “economic need” or “English language learners,” may have evolved over time, affecting trend analyses.</p>
<p>Categorical Limitations: Categories such as race/ethnicity and economic status are often complex and may not be captured fully by the available data.</p>
<p>Covid-19 Impact: The pandemic’s impact started in early 2020, so data from 2017-18 and 2018-19 might not capture the pre-pandemic baseline accurately.</p>
<p>Exploratory data analysis</p>
<p>Perform an (initial) exploratory data analysis.</p>
<p>The dataset breaks down enrollment by grade level and demographic attributes (such as race/ethnicity, gender, economic need, and English learner status) for each school. This is conducive to comprehensive analysis, for example, one can examine racial diversity within specific grades in different schools, or analyze enrollment trends of English learners over the years. The same data can be used to understand the percentage of minorities in schools, which can help in the allocation and balance of special education resources and services</p>
<p>We posed questions such as:</p>
<p>How did covid-19 affect school enrollment? Including total enrollment, enrollment by grade level (PK-12).</p>
<p>How did covid-19 effect the enrollment of schools with different levels of funding? Are underserved schools affect more than schools with sufficient fundings.</p>
<p>Did Covid-19 disproportionately affect school enrollment of minorities student/students of color?</p>
<p>Did Covid-19 disproportionately affect school enrollment of students with disabilities?</p>
<p>Did Covid-19 disproportionately affect school enrollment of students in poverty?</p>
<p>Did Covid-19 disproportionately affect school enrollment of students who have challenges in leaning with the Anglish language?</p>
<p>Questions for reviewers</p>
<p>List specific questions for your peer reviewers and project mentor to answer in giving you feedback on this phase.</p>
<p>Based on the initial exploratory data analysis, do the findings seem valid and are they presented clearly?</p>
<p>Are there any other angles or sub-questions that could add depth to the research?</p>
<p>Are there any critical aspects of the project that seem to be missing or need rethinking?</p>


</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->



</body></html>